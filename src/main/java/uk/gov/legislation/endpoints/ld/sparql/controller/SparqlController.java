package uk.gov.legislation.endpoints.ld.sparql.controller;import jakarta.servlet.http.HttpServletRequest;import org.springframework.http.ResponseEntity;import org.springframework.web.bind.annotation.RestController;import uk.gov.legislation.data.virtuoso.Virtuoso;import uk.gov.legislation.endpoints.ld.sparql.api.SparqlApi;import java.io.IOException;import java.util.Set;@RestControllerpublic class SparqlController implements SparqlApi {    private final Virtuoso virtuoso;    public SparqlController(Virtuoso virtuoso) {        this.virtuoso = virtuoso;    }    @Override    public ResponseEntity <String> sparql(String query, String format,  HttpServletRequest request) throws IOException, InterruptedException {       Set <String> allowedFormats = Set.of("xml", "json", "csv", "txt", "text");        if(!allowedFormats.contains(format)) {            return ResponseEntity.badRequest().body("Unsupported format: " + format);        }        boolean isGetRequest = request.getMethod().equalsIgnoreCase("GET");        String response = virtuoso.query(query, format, isGetRequest);        return ResponseEntity.ok().body(response);    }}